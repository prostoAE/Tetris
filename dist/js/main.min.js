"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var h=e[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var View=function(){function o(t,e,i,h,l){_classCallCheck(this,o),this.element=t,this.width=e,this.height=i,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.playfieldBorderWidth=4,this.playfieldX=this.playfieldBorderWidth,this.playfieldY=this.playfieldBorderWidth,this.playfieldWidth=2*this.width/3,this.playfieldHeight=this.height,this.playfieldInnerWidth=this.playfieldWidth-2*this.playfieldBorderWidth,this.playfieldInnerHeight=this.playfieldHeight-2*this.playfieldBorderWidth,this.blockWidth=this.playfieldInnerWidth/l,this.blockHeight=this.playfieldInnerHeight/h,this.panelX=this.playfieldWidth+10,this.panelY=0,this.panelWidth=this.width/3,this.panelHeight=this.height,this.element.appendChild(this.canvas)}return _createClass(o,[{key:"renderMainScreen",value:function(t){this.clearScreen(),this.renderPlayfield(t),this.renderPanel(t)}},{key:"renderStartScreen",value:function(){this.context.fillStyle="white",this.context.font='18px "Press Start 2P"',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText("Press ENTER  to Start",this.width/2,this.height/2)}},{key:"renderPauseScreen",value:function(){this.context.fillStyle="rgba(0, 0, 0, 0.75)",this.context.fillRect(0,0,this.width,this.height),this.context.fillStyle="white",this.context.font='18px "Press Start 2P"',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText("Press ENTER  to Resume",this.width/2,this.height/2)}},{key:"renderEndScreen",value:function(t){var e=t.score;this.clearScreen(),this.context.fillStyle="white",this.context.font='18px "Press Start 2P"',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText("GAME OVER",this.width/2,this.height/2-48),this.context.fillText("Score: ".concat(e),this.width/2,this.height/2),this.context.fillText("Press ENTER to Restart",this.width/2,this.height/2+48)}},{key:"clearScreen",value:function(){this.context.clearRect(0,0,this.width,this.height)}},{key:"renderPlayfield",value:function(t){for(var e=t.playfield,i=0;i<e.length;i++)for(var h=e[i],l=0;l<h.length;l++){var s=h[l];s&&this.renderBlock(this.playfieldX+l*this.blockWidth,this.playfieldY+i*this.blockHeight,this.blockWidth,this.blockHeight,o.colors[s])}this.context.strokeStyle="white",this.context.lineWidth=this.playfieldBorderWidth,this.context.strokeRect(0,0,this.playfieldWidth,this.playfieldHeight)}},{key:"renderPanel",value:function(t){var e=t.level,i=t.score,h=t.lines,l=t.nextPiece;this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="white",this.context.font='14px "Press Start 2P"',this.context.fillText("Score: ".concat(i),this.panelX,this.panelY+0),this.context.fillText("Lines: ".concat(h),this.panelX,this.panelY+24),this.context.fillText("Level: ".concat(e),this.panelX,this.panelY+48),this.context.fillText("Next:",this.panelX,this.panelY+96);for(var s=0;s<l.blocks.length;s++)for(var n=0;n<l.blocks[s].length;n++){var r=l.blocks[s][n];r&&this.renderBlock(this.panelX+n*this.blockWidth*.5,this.panelY+100+s*this.blockHeight*.5,.5*this.blockWidth,.5*this.blockHeight,o.colors[r])}}},{key:"renderBlock",value:function(t,e,i,h,l){this.context.fillStyle=l,this.context.strokeStyle="black",this.context.lineWidth="2",this.context.fillRect(t,e,i,h,l),this.context.strokeRect(t,e,i,h,l)}}]),o}();_defineProperty(exports.default=View,"colors",{1:"cyan",2:"blue",3:"orange",4:"yellow",5:"green",6:"purple",7:"red"});